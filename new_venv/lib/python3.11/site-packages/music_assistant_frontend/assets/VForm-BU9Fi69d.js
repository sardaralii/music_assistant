import{m as pe,V as j}from"./VTextField-DJj81lxi.js";import{J as X,K as _,p as K,ay as he,C as ye,k as Z,I as Ve,r as B,y as z,x,aR as ge,aJ as W,f as s,F as O,D as A,aS as be,W as ke,aT as J,S as we,aU as Y}from"./index-CQHe9KB5.js";import{j as Pe,e as Ce,a as xe,k as Se,l as De}from"./VCheckboxBtn-WpBm-DQx.js";import{h as Fe,V as Te,f as ee}from"./VMenu-C_g4AWFG.js";import{m as Ae,b as Ie,a as Re}from"./VList-SeV0eskX.js";import{N as Be,c as te,V as G,D as Le,w as Q,K as Ee,m as Oe}from"./VListItem-932LEcae.js";import{V as _e}from"./VVirtualScroll-qRehF0qb.js";function Ke(e,I){const n=X(!1);let V;function r(i){cancelAnimationFrame(V),n.value=!0,V=requestAnimationFrame(()=>{V=requestAnimationFrame(()=>{n.value=!1})})}async function b(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(n.value){const l=_(n,()=>{l(),i()})}else i()})}async function k(i){var p,S;if(i.key==="Tab"&&((p=I.value)==null||p.focus()),!["PageDown","PageUp","Home","End"].includes(i.key))return;const l=(S=e.value)==null?void 0:S.$el;if(!l)return;(i.key==="Home"||i.key==="End")&&l.scrollTo({top:i.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await b();const d=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const o=l.getBoundingClientRect().top;for(const y of d)if(y.getBoundingClientRect().top>=o){y.focus();break}}else{const o=l.getBoundingClientRect().bottom;for(const y of[...d].reverse())if(y.getBoundingClientRect().bottom<=o){y.focus();break}}}return{onScrollPassive:r,onKeydown:k}}const He=K({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:he,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ae({itemChildren:!1})},"Select"),Me=K({...He(),...ye(pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Be({transition:{component:Fe}})},"VSelect"),Ye=Z()({name:"VSelect",props:Me(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,I){let{slots:n}=I;const{t:V}=Ve(),r=B(),b=B(),k=B(),i=z(e,"menu"),l=x({get:()=>i.value,set:t=>{var a;i.value&&!t&&((a=b.value)!=null&&a.Î¨openChildren.size)||(i.value=t)}}),{items:d,transformIn:p,transformOut:S}=Ie(e),o=z(e,"modelValue",[],t=>p(t===null?[null]:ge(t)),t=>{const a=S(t);return e.multiple?a:a[0]??null}),y=x(()=>typeof e.counterValue=="function"?e.counterValue(o.value):typeof e.counterValue=="number"?e.counterValue:o.value.length),D=Pe(),ne=x(()=>o.value.map(t=>t.value)),P=X(!1),H=x(()=>l.value?e.closeText:e.openText);let E="",M;const F=x(()=>e.hideSelected?d.value.filter(t=>!o.value.some(a=>e.valueComparator(a,t))):d.value),N=x(()=>e.hideNoData&&!F.value.length||e.readonly||(D==null?void 0:D.isReadonly.value)),le=x(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),R=B(),ae=Ke(R,r);function oe(t){e.openOnClear&&(l.value=!0)}function ue(){N.value||(l.value=!l.value)}function ie(t){J(t)&&U(t)}function U(t){var g,u;if(!t.key||e.readonly||D!=null&&D.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(l.value=!0),["Escape","Tab"].includes(t.key)&&(l.value=!1),t.key==="Home"?(g=R.value)==null||g.focus("first"):t.key==="End"&&((u=R.value)==null||u.focus("last"));const a=1e3;if(e.multiple||!J(t))return;const c=performance.now();c-M>a&&(E=""),E+=t.key.toLowerCase(),M=c;const w=d.value.find(f=>f.title.toLowerCase().startsWith(E));if(w!==void 0){o.value=[w];const f=F.value.indexOf(w);W&&window.requestAnimationFrame(()=>{var m;f>=0&&((m=k.value)==null||m.scrollToIndex(f))})}}function L(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const c=o.value.findIndex(g=>e.valueComparator(g.value,t.value)),w=a??!~c;if(~c){const g=w?[...o.value,t]:[...o.value];g.splice(c,1),o.value=g}else w&&(o.value=[...o.value,t])}else{const c=a!==!1;o.value=c?[t]:[],we(()=>{l.value=!1})}}function se(t){var a;(a=R.value)!=null&&a.$el.contains(t.relatedTarget)||(l.value=!1)}function re(){var t;e.eager&&((t=k.value)==null||t.calculateVisibleItems())}function ce(){var t;P.value&&((t=r.value)==null||t.focus())}function de(t){P.value=!0}function fe(t){if(t==null)o.value=[];else if(Y(r.value,":autofill")||Y(r.value,":-webkit-autofill")){const a=d.value.find(c=>c.title===t);a&&L(a)}else r.value&&(r.value.value="")}return _(l,()=>{if(!e.hideSelected&&l.value&&o.value.length){const t=F.value.findIndex(a=>o.value.some(c=>e.valueComparator(c.value,a.value)));W&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=k.value)==null||a.scrollToIndex(t))})}}),_(()=>e.items,(t,a)=>{l.value||P.value&&!a.length&&t.length&&(l.value=!0)}),te(()=>{const t=!!(e.chips||n.chip),a=!!(!e.hideNoData||F.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),c=o.value.length>0,w=j.filterProps(e),g=c||!P.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(j,A({ref:r},w,{modelValue:o.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":fe,focused:P.value,"onUpdate:focused":u=>P.value=u,validationValue:o.externalValue,counterValue:y.value,dirty:c,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":o.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:g,"onClick:clear":oe,"onMousedown:control":ue,onBlur:se,onKeydown:U,"aria-label":V(H.value),title:V(H.value)}),{...n,default:()=>s(O,null,[s(Te,A({ref:b,modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,activator:"parent",contentClass:"v-select__content",disabled:N.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:re,onAfterLeave:ce},le.value),{default:()=>[a&&s(Re,A({ref:R,selected:ne.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:ie,onFocusin:de,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},ae,e.listProps),{default:()=>{var u,f,m;return[(u=n["prepend-item"])==null?void 0:u.call(n),!F.value.length&&!e.hideNoData&&(((f=n["no-data"])==null?void 0:f.call(n))??s(G,{title:V(e.noDataText)},null)),s(_e,{ref:k,renderless:!0,items:F.value},{default:C=>{var $;let{item:h,index:T,itemRef:v}=C;const q=A(h.props,{ref:v,key:T,onClick:()=>L(h,null)});return(($=n.item)==null?void 0:$.call(n,{item:h,index:T,props:q}))??s(G,A(q,{role:"option"}),{prepend:me=>{let{isSelected:ve}=me;return s(O,null,[e.multiple&&!e.hideSelected?s(Ce,{key:h.value,modelValue:ve,ripple:!1,tabindex:"-1"},null):void 0,h.props.prependAvatar&&s(Le,{image:h.props.prependAvatar},null),h.props.prependIcon&&s(Q,{icon:h.props.prependIcon},null)])}})}}),(m=n["append-item"])==null?void 0:m.call(n)]}})]}),o.value.map((u,f)=>{function m(v){v.stopPropagation(),v.preventDefault(),L(u,!1)}const C={"onClick:close":m,onKeydown(v){v.key!=="Enter"&&v.key!==" "||(v.preventDefault(),v.stopPropagation(),m(v))},onMousedown(v){v.preventDefault(),v.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},h=t?!!n.chip:!!n.selection,T=h?be(t?n.chip({item:u,index:f,props:C}):n.selection({item:u,index:f})):void 0;if(!(h&&!T))return s("div",{key:u.value,class:"v-select__selection"},[t?n.chip?s(Ee,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>[T]}):s(xe,A({key:"chip",closable:e.closableChips,size:"small",text:u.title,disabled:u.props.disabled},C),null):T??s("span",{class:"v-select__selection-text"},[u.title,e.multiple&&f<o.value.length-1&&s("span",{class:"v-select__selection-comma"},[ke(",")])])])})]),"append-inner":function(){var C;for(var u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];return s(O,null,[(C=n["append-inner"])==null?void 0:C.call(n,...f),e.menuIcon?s(Q,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),ee({isFocused:P,menu:l,select:L},r)}}),Ne=K({...Oe(),...Se()},"VForm"),Ge=Z()({name:"VForm",props:Ne(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,I){let{slots:n,emit:V}=I;const r=De(e),b=B();function k(l){l.preventDefault(),r.reset()}function i(l){const d=l,p=r.validate();d.then=p.then.bind(p),d.catch=p.catch.bind(p),d.finally=p.finally.bind(p),V("submit",d),d.defaultPrevented||p.then(S=>{var y;let{valid:o}=S;o&&((y=b.value)==null||y.submit())}),d.preventDefault()}return te(()=>{var l;return s("form",{ref:b,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:k,onSubmit:i},[(l=n.default)==null?void 0:l.call(n,r)])}),ee(r,b)}});export{Ye as V,Ge as a};

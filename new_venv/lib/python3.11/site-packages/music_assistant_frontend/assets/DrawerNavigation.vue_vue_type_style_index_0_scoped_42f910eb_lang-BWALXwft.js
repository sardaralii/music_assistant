import{B as se}from"./Button-C2tPqXAJ.js";import{J as L,x as p,B as re,o as ee,K as D,a as te,aD as ue,ab as H,ac as ce,at as ve,p as de,aE as me,n as he,k as fe,H as ge,G as ye,v as A,a6 as pe,y as be,r as W,z as we,f as k,D as q,aF as ke,F as ae,S as Se,d as Ee,c as Y,e as Z,w as I,g as K,h as Me,i as Te,u as Ve}from"./index-CQHe9KB5.js";import{d as xe,m as Be,f as Le,g as Ce,b as Ne,i as Pe,j,l as De,n as _e,P as Re,Q as Ie,c as He,y as Ye,K as We,V as G}from"./VListItem-932LEcae.js";import{u as Oe,V as $e,a as ze}from"./VList-SeV0eskX.js";import{e as Fe,b as Xe,g as Ue}from"./VMenu-C_g4AWFG.js";import{m as Ae,a as qe}from"./layout-BxB_31nW.js";const Ze=""+new URL("icon-iUF3LVzp.png",import.meta.url).href;function Ke(e){let{rootEl:o,isSticky:a,layoutItemStyles:E}=e;const t=L(!1),l=L(0),n=p(()=>{const b=typeof t.value=="boolean"?"top":t.value;return[a.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[b]:re(l.value)}:{top:E.value.top}]});ee(()=>{D(a,b=>{b?window.addEventListener("scroll",M,{passive:!0}):window.removeEventListener("scroll",M)},{immediate:!0})}),te(()=>{window.removeEventListener("scroll",M)});let g=0;function M(){const b=g>window.scrollY?"up":"down",v=o.value.getBoundingClientRect(),d=parseFloat(E.value.top??0),c=window.scrollY-Math.max(0,l.value-d),h=v.height+Math.max(l.value,d)-window.scrollY-window.innerHeight,y=parseFloat(getComputedStyle(o.value).getPropertyValue("--v-body-scroll-y"))||0;v.height<window.innerHeight-d?(t.value="top",l.value=d):b==="up"&&t.value==="bottom"||b==="down"&&t.value==="top"?(l.value=window.scrollY+v.top-y,t.value=!0):b==="down"&&h<=0?(l.value=0,t.value="bottom"):b==="up"&&c<=0&&(y?t.value!=="top"&&(l.value=-c+y+d,t.value="top"):(l.value=v.top+c,t.value="top")),g=window.scrollY}return{isStuck:t,stickyStyles:n}}const je=100,Ge=20;function J(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function Q(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let o=0;for(let a=e.length-1;a>0;a--){if(e[a].t===e[a-1].t)continue;const E=J(o),t=(e[a].d-e[a-1].d)/(e[a].t-e[a-1].t);o+=(t-E)*Math.abs(t),a===e.length-1&&(o*=.5)}return J(o)*1e3}function Je(){const e={};function o(t){Array.from(t.changedTouches).forEach(l=>{(e[l.identifier]??(e[l.identifier]=new ue(Ge))).push([t.timeStamp,l])})}function a(t){Array.from(t.changedTouches).forEach(l=>{delete e[l.identifier]})}function E(t){var b;const l=(b=e[t])==null?void 0:b.values().reverse();if(!l)throw new Error(`No samples for touch id ${t}`);const n=l[0],g=[],M=[];for(const v of l){if(n[0]-v[0]>je)break;g.push({t:v[0],d:v[1].clientX}),M.push({t:v[0],d:v[1].clientY})}return{x:Q(g),y:Q(M),get direction(){const{x:v,y:d}=this,[c,h]=[Math.abs(v),Math.abs(d)];return c>h&&v>=0?"right":c>h&&v<=0?"left":h>c&&d>=0?"down":h>c&&d<=0?"up":Qe()}}}return{addMovement:o,endTouch:a,getVelocity:E}}function Qe(){throw new Error}function et(e){let{el:o,isActive:a,isTemporary:E,width:t,touchless:l,position:n}=e;ee(()=>{window.addEventListener("touchstart",V,{passive:!0}),window.addEventListener("touchmove",T,{passive:!1}),window.addEventListener("touchend",_,{passive:!0})}),te(()=>{window.removeEventListener("touchstart",V),window.removeEventListener("touchmove",T),window.removeEventListener("touchend",_)});const g=p(()=>["left","right"].includes(n.value)),{addMovement:M,endTouch:b,getVelocity:v}=Je();let d=!1;const c=L(!1),h=L(0),y=L(0);let S;function C(i,s){return(n.value==="left"?i:n.value==="right"?document.documentElement.clientWidth-i:n.value==="top"?i:n.value==="bottom"?document.documentElement.clientHeight-i:B())-(s?t.value:0)}function N(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=n.value==="left"?(i-y.value)/t.value:n.value==="right"?(document.documentElement.clientWidth-i-y.value)/t.value:n.value==="top"?(i-y.value)/t.value:n.value==="bottom"?(document.documentElement.clientHeight-i-y.value)/t.value:B();return s?Math.max(0,Math.min(1,r)):r}function V(i){if(l.value)return;const s=i.changedTouches[0].clientX,r=i.changedTouches[0].clientY,u=25,f=n.value==="left"?s<u:n.value==="right"?s>document.documentElement.clientWidth-u:n.value==="top"?r<u:n.value==="bottom"?r>document.documentElement.clientHeight-u:B(),m=a.value&&(n.value==="left"?s<t.value:n.value==="right"?s>document.documentElement.clientWidth-t.value:n.value==="top"?r<t.value:n.value==="bottom"?r>document.documentElement.clientHeight-t.value:B());(f||m||a.value&&E.value)&&(S=[s,r],y.value=C(g.value?s:r,a.value),h.value=N(g.value?s:r),d=y.value>-20&&y.value<80,b(i),M(i))}function T(i){const s=i.changedTouches[0].clientX,r=i.changedTouches[0].clientY;if(d){if(!i.cancelable){d=!1;return}const f=Math.abs(s-S[0]),m=Math.abs(r-S[1]);(g.value?f>m&&f>3:m>f&&m>3)?(c.value=!0,d=!1):(g.value?m:f)>3&&(d=!1)}if(!c.value)return;i.preventDefault(),M(i);const u=N(g.value?s:r,!1);h.value=Math.max(0,Math.min(1,u)),u>1?y.value=C(g.value?s:r,!0):u<0&&(y.value=C(g.value?s:r,!1))}function _(i){if(d=!1,!c.value)return;M(i),c.value=!1;const s=v(i.changedTouches[0].identifier),r=Math.abs(s.x),u=Math.abs(s.y);(g.value?r>u&&r>400:u>r&&u>3)?a.value=s.direction===({left:"right",right:"left",top:"down",bottom:"up"}[n.value]||B()):a.value=h.value>.5}const P=p(()=>c.value?{transform:n.value==="left"?`translateX(calc(-100% + ${h.value*t.value}px))`:n.value==="right"?`translateX(calc(100% - ${h.value*t.value}px))`:n.value==="top"?`translateY(calc(-100% + ${h.value*t.value}px))`:n.value==="bottom"?`translateY(calc(100% - ${h.value*t.value}px))`:B(),transition:"none"}:void 0);return H(c,()=>{var r,u;const i=((r=o.value)==null?void 0:r.style.transform)??null,s=((u=o.value)==null?void 0:u.style.transition)??null;ce(()=>{var f,m,x,R;(m=o.value)==null||m.style.setProperty("transform",((f=P.value)==null?void 0:f.transform)||"none"),(R=o.value)==null||R.style.setProperty("transition",((x=P.value)==null?void 0:x.transition)||null)}),ve(()=>{var f,m;(f=o.value)==null||f.style.setProperty("transform",i),(m=o.value)==null||m.style.setProperty("transition",s)})}),{isDragging:c,dragProgress:h,dragStyles:P}}function B(){throw new Error}const tt=["start","end","left","right","top","bottom"],at=de({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>tt.includes(e)},sticky:Boolean,...xe(),...Be(),...Fe(),...me({mobile:null}),...Le(),...Ae(),...Ce(),...Ne({tag:"nav"}),...he()},"VNavigationDrawer"),nt=fe()({name:"VNavigationDrawer",props:at(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,o){let{attrs:a,emit:E,slots:t}=o;const{isRtl:l}=ge(),{themeClasses:n}=ye(e),{borderClasses:g}=Pe(e),{backgroundColorClasses:M,backgroundColorStyles:b}=j(A(e,"color")),{elevationClasses:v}=De(e),{displayClasses:d,mobile:c}=pe(e),{roundedClasses:h}=_e(e),y=Re(),S=be(e,"modelValue",null,w=>!!w),{ssrBootStyles:C}=Oe(),{scopeId:N}=Xe(),V=W(),T=L(!1),{runOpenDelay:_,runCloseDelay:P}=Ue(e,w=>{T.value=w}),i=p(()=>e.rail&&e.expandOnHover&&T.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),s=p(()=>Ie(e.location,l.value)),r=p(()=>e.persistent),u=p(()=>!e.permanent&&(c.value||e.temporary)),f=p(()=>e.sticky&&!u.value&&s.value!=="bottom");H(()=>e.expandOnHover&&e.rail!=null,()=>{D(T,w=>E("update:rail",!w))}),H(()=>!e.disableResizeWatcher,()=>{D(u,w=>!e.permanent&&Se(()=>S.value=!w))}),H(()=>!e.disableRouteWatcher&&!!y,()=>{D(y.currentRoute,()=>u.value&&(S.value=!1))}),D(()=>e.permanent,w=>{w&&(S.value=!0)}),e.modelValue==null&&!u.value&&(S.value=e.permanent||!c.value);const{isDragging:m,dragProgress:x}=et({el:V,isActive:S,isTemporary:u,width:i,touchless:A(e,"touchless"),position:s}),R=p(()=>{const w=u.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):i.value;return m.value?w*x.value:w}),ne=p(()=>["top","bottom"].includes(e.location)?0:i.value),{layoutItemStyles:O,layoutItemScrimStyles:oe}=qe({id:e.name,order:p(()=>parseInt(e.order,10)),position:s,layoutSize:R,elementSize:ne,active:p(()=>S.value||m.value),disableTransitions:p(()=>m.value),absolute:p(()=>e.absolute||f.value&&typeof $.value!="string")}),{isStuck:$,stickyStyles:le}=Ke({rootEl:V,isSticky:f,layoutItemStyles:O}),z=j(p(()=>typeof e.scrim=="string"?e.scrim:null)),ie=p(()=>({...m.value?{opacity:x.value*.2,transition:"none"}:void 0,...oe.value}));return we({VList:{bgColor:"transparent"}}),He(()=>{const w=t.image||e.image;return k(ae,null,[k(e.tag,q({ref:V,onMouseenter:_,onMouseleave:P,class:["v-navigation-drawer",`v-navigation-drawer--${s.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":T.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":u.value,"v-navigation-drawer--persistent":r.value,"v-navigation-drawer--active":S.value,"v-navigation-drawer--sticky":f.value},n.value,M.value,g.value,d.value,v.value,h.value,e.class],style:[b.value,O.value,C.value,le.value,e.style,["top","bottom"].includes(s.value)?{height:"auto"}:{}]},N,a),{default:()=>{var F,X,U;return[w&&k("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?k(We,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):k(Ye,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&k("div",{class:"v-navigation-drawer__prepend"},[(F=t.prepend)==null?void 0:F.call(t)]),k("div",{class:"v-navigation-drawer__content"},[(X=t.default)==null?void 0:X.call(t)]),t.append&&k("div",{class:"v-navigation-drawer__append"},[(U=t.append)==null?void 0:U.call(t)])]}}),k(ke,{name:"fade-transition"},{default:()=>[u.value&&(m.value||S.value)&&!!e.scrim&&k("div",q({class:["v-navigation-drawer__scrim",z.backgroundColorClasses.value],style:[ie.value,z.backgroundColorStyles.value],onClick:()=>{r.value||(S.value=!1)}},N),null)]})])}),{isStuck:$}}}),ot=["home","search","artists","albums","tracks","playlists","radios","browse"],lt=function(){const e=localStorage.getItem("frontend.settings.menu_items"),o=e?e.split(","):ot,a=[];return o.includes("home")&&a.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),o.includes("search")&&a.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),o.includes("artists")&&a.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0}),o.includes("albums")&&a.push({label:"albums",icon:"mdi-album",path:"/albums",isLibraryNode:!0}),o.includes("tracks")&&a.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0}),o.includes("playlists")&&a.push({label:"playlists",icon:"mdi-playlist-play",path:"/playlists",isLibraryNode:!0}),o.includes("radios")&&a.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0}),o.includes("browse")&&a.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),o.includes("settings")&&a.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0}),a},dt=Ee({__name:"DrawerNavigation",setup(e){const o=W(!0),a=W(!1),E=lt();return(t,l)=>(Y(),Z(nt,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=n=>o.value=n),app:"",rail:a.value,width:280},{default:I(()=>[k(G,{style:{height:"55px"},active:!1},{prepend:I(()=>l[2]||(l[2]=[K("img",{class:"logo_icon",size:"40",src:Ze},null,-1)])),title:I(()=>l[3]||(l[3]=[K("div",{class:"logo_text"},"Music Assistant",-1)])),_:1}),k($e),k(ze,{lines:"one",density:"compact",nav:""},{default:I(()=>[(Y(!0),Me(ae,null,Te(Ve(E),n=>(Y(),Z(G,{key:n.path,nav:"",density:"compact",height:15,title:t.$t(n.label),"prepend-icon":n.icon,to:n.path},null,8,["title","prepend-icon","to"]))),128))]),_:1}),k(se,{nav:"",height:15,width:40,style:{position:"relative",float:"right",right:"10px",top:"20px"},ripple:!1,icon:a.value?"mdi-chevron-right":"mdi-chevron-left",title:t.$t("tooltip.show_menu"),onClick:l[0]||(l[0]=n=>a.value=!a.value)},null,8,["icon","title"])]),_:1},8,["modelValue","rail"]))}});export{ot as D,nt as V,dt as _,lt as g};
